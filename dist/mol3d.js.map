{"version":3,"sources":["../src/intro.js","../.tmp/es5/.tmp/es6/concat.js","../src/outro.js"],"names":[],"mappings":"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","file":"mol3d.js","sourcesContent":["(function(root) {","export default\nclass Canvas {\n\n  constructor() {\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);\n    this.camera.position.z = 5;\n    this.renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.setClearColor(0x000000, 0);\n\n    this.renderer.domElement.addEventListener('contextmenu', (e) => {\n      e.preventDefault();\n      return false;\n    });\n\n    this.group = new THREE.Object3D();\n    this.scene.add(this.group);\n\n    this.atoms = [];\n    this.bonds = [];\n\n    this._displays = [];\n    this._display = null;\n\n    this._modes = [];\n    this._mode = null;\n  }\n\n  attach(molecule) {\n    for (let i in molecule.atoms) {\n      let atom = molecule.atoms[i];\n\n      this.addAtom(atom);\n    }\n  }\n\n  addAtom(atom, drawBonds = true) {\n    this.atoms.push(atom);\n\n    atom.on('bond', () => {\n      // TODO: draw cylinder dynamically\n    });\n\n    atom.on('delete', () => {\n      for (let i in this._displays) {\n        let _display = this._displays[i];\n        _display.removeAtom(atom);\n      }\n\n      this.atoms.splice(this.atoms.indexOf(atom), 1);\n    });\n\n    this._display.drawAtom(atom);\n\n    if (drawBonds) {\n      for (let i in atom.bonds) {\n        this.addBond(atom.bonds[i]);\n      }\n    }\n  }\n\n  update() {\n    for (let atom of this.atoms) {\n      for(let display of this._displays) {\n        display.drawAtom(atom);\n      }\n    }\n    for (let bond of this.bonds) {\n      for(let display of this._displays) {\n        display.drawBond(bond);\n      }\n    }\n  }\n\n  removeAtom(atom) {\n    atom.emit('delete');\n  }\n\n  addBond(bond) {\n    this.bonds.push(bond);\n\n    bond.on('delete', () => {\n      for (let i in this._displays) {\n        let _display = this._displays[i];\n        _display.removeBond(bond);\n      }\n\n      this.bonds.splice(this.bonds.indexOf(bond), 1);\n    });\n\n\n    this._display.drawBond(bond);\n  }\n\n  removeBond(bond) {\n    bond.emit('delete');\n  }\n\n  clear() {\n    var atoms = this.atoms.slice(0, this.atoms.length);\n    var bonds = this.bonds.slice(0, this.bonds.length);\n\n    for (let atom of atoms) {\n      this.removeAtom(atom);\n    }\n\n    for (let bond of bonds) {\n      this.removeBond(bond);\n    }\n  }\n\n\n  setMode(mode) {\n    if (this._mode) {\n      this._mode.down();\n    }\n\n    for (var i in this._modes) {\n      let _mode = this._modes[i];\n\n      if (_mode instanceof mode) {\n        this._mode = _mode;\n        this._mode.up();\n        return;\n      }\n    }\n\n    this._mode = new mode(this);\n    this._mode.create();\n    this._modes.push(this._mode);\n  }\n\n  setDisplay(display) {\n    if (this._display) {\n      this._display.down();\n    }\n\n    for (var i in this._displays) {\n      let _display = this._displays[i];\n\n      if (_display instanceof display) {\n        this._display = _display;\n        this._display.up();\n        return;\n      }\n    }\n\n    this._display = new display(this);\n    this._display.init();\n    this._displays.push(this._display);\n  }\n\n  show() {\n    requestAnimationFrame(() => this.show());\n\n    this.renderer.render(this.scene, this.camera);\n  }\n\n}\nexport default\nclass OrbitHelper {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n\n    this.quaternion = new LiThree.Math.Quaternion();\n    this.matrix = null;\n\n    this.origin = new LiThree.Math.Vector3();\n    this.speed = 1;\n\n    canvas.renderer.camera.position.z = -10;\n\n    this._getMatrix();\n  }\n\n  rotate(dx, dy) {\n    dx *= this.speed;\n    dy *= this.speed;\n\n    var\n      r = Math.sqrt(dx * dx + dy * dy),\n      dq = new LiThree.Math.Quaternion(1, 0, 0, 0),\n      cq = this.quaternion,\n      rs = Math.sin(r * Math.PI) / r;\n\n    if(r < 0.000001) {\n      return;\n    }\n\n    dq.x = Math.cos(r * Math.PI);\n    dq.y = 0;\n    dq.z = rs * dx;\n    dq.w = -rs * dy;\n\n    this.quaternion = new LiThree.Math.Quaternion(1, 0, 0, 0);\n    this.quaternion.multiply(dq);\n    this.quaternion.multiply(cq);\n\n    this._getMatrix();\n  }\n\n  distance(delta) {\n    var canvas = this.canvas,\n      camera = canvas.renderer.camera;\n\n    delta *= this.speed / 50;\n\n    if (canvas.getData('tween')) {\n      var z = camera.position.z + delta;\n      new TWEEN.Tween(camera.position)\n        .to({z: z}, 200)\n        .easing(TWEEN.Easing.Cubic.Out)\n        .start();\n    } else {\n      camera.position.z += delta / 2;\n    }\n  }\n\n  _getMatrix() {\n    this.matrix = LiThree.Math.Matrix4.fromRotationTranslationScaleOrigin(this.quaternion, this.origin, new LiThree.Math.Vector3(1, 1, 1), this.origin);\n    return this.matrix;\n  }\n\n}\nexport default\nclass BaseDisplay {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n    this._atoms = [];\n  }\n  \n}\nimport BaseDisplay from './_base.js';\n\nvar BAS_KEY = 'ball-and-stick';\n\nexport default\nclass BallAndStick extends BaseDisplay {\n\n  constructor(canvas) {\n    this.lights = [];\n    this.geometries = {\n      sphere: new THREE.SphereGeometry(0.3, 20, 20, 0, 2 * Math.PI),\n      cylinder: new THREE.CylinderGeometry(0.04, 0.04, 1)\n    };\n    var mat = new THREE.Matrix4();\n    mat.translate(new THREE.Vector3(0, 1, 0));\n    this.geometries.single = this.geometries.cylinder;\n    this.geometries.double = new THREE.Geometry();\n    this.geometries.double.merge(this.geometries.single, mat);\n\n    this.geometries.cylinder.applyMatrix(new THREE.Matrix4().makeRotationX(Math.PI / 2));\n\n    super(canvas);\n  }\n\n  drawLight() {\n    var light = new THREE.PointLight(0xffffff, 1.5);\n\n    var updateLightPosition = () => {\n      let position = this.canvas.camera.position;\n\n      light.position.set(position.x * 100, position.y * 100, position.z * 300);\n\n      requestAnimationFrame(updateLightPosition);\n    };\n\n    requestAnimationFrame(updateLightPosition);\n\n    this.canvas.scene.add(light);\n  }\n\n  drawAtom(atom) {\n    var mesh, material;\n    if( ! atom.hasData(BAS_KEY)) {\n      material = new THREE.MeshPhongMaterial({\n        specular: 0x101010,\n        shininess: 30\n      });\n      mesh = new THREE.Mesh(this.geometries.sphere, material);\n\n      atom.setData(BAS_KEY, mesh);\n      this.canvas.group.add(mesh);\n\n      mesh.type = 'atom';\n      mesh.model = atom;\n    } else {\n      mesh = atom.getData(BAS_KEY);\n      material = mesh.material;\n    }\n\n    material.ambient.set(atom.element.color);\n    material.color.set(atom.element.color);\n\n    let radius = Math.exp(-Math.pow(atom.element.atomicRadius - 91, 2) / 500) * atom.element.atomicRadius / 70;\n    mesh.scale.set(radius, radius, radius);\n    mesh.position.copy(atom.position);\n  }\n\n  removeAtom(atom) {\n    let mesh = atom.getData(BAS_KEY);\n    this.canvas.group.remove(mesh);\n  }\n\n  drawBond(bond) {\n    var canvas = this.canvas,\n      group = canvas.group,\n      begin = bond.begin,\n      end = bond.end,\n      beginData = begin.getData(BAS_KEY),\n      endData = end.getData(BAS_KEY);\n\n\n    if (!beginData || !endData) {\n      return;\n    }\n\n    var beginPosition = beginData.position,\n      endPosition = endData.position,\n      beginColor = new THREE.Color(begin.element.color),\n      endColor = new THREE.Color(end.element.color),\n      distance = beginPosition.distanceTo(endPosition),\n      middle = beginPosition.clone().add(endPosition).divideScalar(2),\n      d = 0.06;\n\n    var material, mesh;\n\n    if(! bond.hasData(BAS_KEY)) {\n\n\n      material = new THREE.MeshPhongMaterial({\n        color: 0xffffff,\n        specular: 0x101010,\n        shininess: 30,\n        transparent: true\n      });\n\n      mesh = new THREE.Mesh(this.geometries.cylinder, material);\n      bond.setData(BAS_KEY, mesh);\n    } else {\n      mesh = bond.getData(BAS_KEY);\n      material = mesh.material;\n    }\n\n    let texture = BallAndStick.generateTexture(beginColor, endColor);\n\n    material.map = texture;\n    mesh.scale.z = distance;\n    mesh.position.copy(middle);\n    mesh.lookAt(endPosition);\n\n    group.add(mesh);\n\n/*\n    var c = (bond.order - 1) * d;\n\n    for (let i = 0; i < bond.order; i++) {\n      let mesh = new THREE.Mesh(this.geometries.cylinder, material);\n      mesh.scale.z = distance;\n      mesh.position.copy(middle);\n      mesh.lookAt(endPosition);\n      elements.add(mesh);\n    }\n for (let j in elements.children) {\n let cylinder = elements.children[j];\n\n cylinder.position.y += j * d * 2.1 - c;\n }\n*/\n\n\n\n  }\n\n  removeBond(bond) {\n    let mesh = bond.getData(BAS_KEY);\n    this.canvas.group.remove(mesh);\n  }\n\n  init() {\n    this.drawLight();\n    this.up();\n  }\n\n  up() {\n    var scene = this.canvas.scene;\n  }\n\n  down() {\n    var scene = this.canvas.scene;\n  }\n\n  static generateTexture(b, e) {\n    b = '#' + b.getHexString();\n    e = '#' + e.getHexString();\n\n    var width = 2,\n      height = 200;\n\n    // create canvas\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n\n    // get context\n    var context = canvas.getContext('2d');\n\n    // draw gradient\n    context.rect(0, 0, width, height);\n    var gradient = context.createLinearGradient(0, 0, 0, height);\n    gradient.addColorStop(0, e);\n    gradient.addColorStop(0.5, e);\n    gradient.addColorStop(0.5, b);\n    gradient.addColorStop(1, b);\n    context.fillStyle = gradient;\n    context.fill();\n\n    var texture = new THREE.Texture(canvas);\n    canvas.remove();\n\n    texture.needsUpdate = true; // important!\n\n    return texture;\n  }\n}\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\nclass OrbitControls {\n  constructor(object, domElement) {\n\n    this.object = object;\n    this.domElement = ( domElement !== undefined ) ? domElement : document;\n\n    // API\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // \"target\" sets the location of focus, where the control orbits around\n    // and where it pans with respect to.\n    this.target = new THREE.Vector3();\n\n    // center is old, deprecated; use \"target\" instead\n    this.center = this.target;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for\n    // backwards compatibility\n    this.noZoom = false;\n    this.zoomSpeed = 1.0;\n\n    // Limits to how far you can dolly in and out\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // Set to true to disable this control\n    this.noRotate = false;\n    this.rotateSpeed = 1.0;\n\n    // Set to true to disable this control\n    this.noPan = false;\n    this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    this.minAzimuthAngle = -Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to disable use of the keys\n    this.noKeys = false;\n\n    // The four arrow keys\n    this.keys = {LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40};\n\n    // Mouse buttons\n    this.mouseButtons = {ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT};\n\n    ////////////\n    // internals\n\n    var scope = this;\n\n    var EPS = 0.000001;\n\n    var rotateStart = new THREE.Vector2();\n    var rotateEnd = new THREE.Vector2();\n    var rotateDelta = new THREE.Vector2();\n\n    var panStart = new THREE.Vector2();\n    var panEnd = new THREE.Vector2();\n    var panDelta = new THREE.Vector2();\n    var panOffset = new THREE.Vector3();\n\n    var offset = new THREE.Vector3();\n\n    var dollyStart = new THREE.Vector2();\n    var dollyEnd = new THREE.Vector2();\n    var dollyDelta = new THREE.Vector2();\n\n    var theta;\n    var phi;\n    var phiDelta = 0;\n    var thetaDelta = 0;\n    var scale = 1;\n    var pan = new THREE.Vector3();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    var STATE = {NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5};\n\n    var state = STATE.NONE;\n\n    // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n\n    // so camera.up is the orbit axis\n\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n\n    // events\n\n    var changeEvent = {type: 'change'};\n    var startEvent = {type: 'start'};\n    var endEvent = {type: 'end'};\n\n    this.rotateLeft = function (angle) {\n\n      if (angle === undefined) {\n\n        angle = getAutoRotationAngle();\n\n      }\n\n      thetaDelta -= angle;\n\n    };\n\n    this.rotateUp = function (angle) {\n\n      if (angle === undefined) {\n\n        angle = getAutoRotationAngle();\n\n      }\n\n      phiDelta -= angle;\n\n    };\n\n    // pass in distance in world space to move left\n    this.panLeft = function (distance) {\n\n      var te = this.object.matrix.elements;\n\n      // get X column of matrix\n      panOffset.set(te[0], te[1], te[2]);\n      panOffset.multiplyScalar(-distance);\n\n      pan.add(panOffset);\n\n    };\n\n    // pass in distance in world space to move up\n    this.panUp = function (distance) {\n\n      var te = this.object.matrix.elements;\n\n      // get Y column of matrix\n      panOffset.set(te[4], te[5], te[6]);\n      panOffset.multiplyScalar(distance);\n\n      pan.add(panOffset);\n\n    };\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    this.pan = function (deltaX, deltaY) {\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (scope.object.fov !== undefined) {\n\n        // perspective\n        var position = scope.object.position;\n        var offset = position.clone().sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(( scope.object.fov / 2 ) * Math.PI / 180.0);\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        scope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n        scope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n\n      } else if (scope.object.top !== undefined) {\n\n        // orthographic\n        scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n        scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n\n      } else {\n\n        // camera neither orthographic or perspective\n        console.warn('WARNING: orbit-controls.js encountered an unknown camera type - pan disabled.');\n\n      }\n\n    };\n\n    this.dollyIn = function (dollyScale) {\n\n      if (dollyScale === undefined) {\n\n        dollyScale = scope.getZoomScale();\n\n      }\n\n      scale /= dollyScale;\n\n    };\n\n    this.dollyOut = function (dollyScale) {\n\n      if (dollyScale === undefined) {\n\n        dollyScale = scope.getZoomScale();\n\n      }\n\n      scale *= dollyScale;\n\n    };\n\n    this.update = function () {\n\n      var position = this.object.position;\n\n      offset.copy(position).sub(this.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n\n      theta = Math.atan2(offset.x, offset.z);\n\n      // angle from y-axis\n\n      phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n      if (this.autoRotate && state === STATE.NONE) {\n\n        this.rotateLeft(getAutoRotationAngle());\n\n      }\n\n      theta += thetaDelta;\n      phi += phiDelta;\n\n      // restrict theta to be between desired limits\n      theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n      // restrict phi to be between desired limits\n      phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n      // restrict phi to be betwee EPS and PI-EPS\n      phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n      var radius = offset.length() * scale;\n\n      // restrict radius to be between desired limits\n      radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n      // move target to panned location\n      this.target.add(pan);\n\n      offset.x = radius * Math.sin(phi) * Math.sin(theta);\n      offset.y = radius * Math.cos(phi);\n      offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(this.target).add(offset);\n\n      this.object.lookAt(this.target);\n\n      thetaDelta = 0;\n      phiDelta = 0;\n      scale = 1;\n      pan.set(0, 0, 0);\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (lastPosition.distanceToSquared(this.object.position) > EPS\n        || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n\n        //this.dispatchEvent(changeEvent);\n\n        lastPosition.copy(this.object.position);\n        lastQuaternion.copy(this.object.quaternion);\n\n      }\n\n    };\n\n\n    this.reset = function () {\n\n      state = STATE.NONE;\n\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n\n      this.update();\n\n    };\n\n    this.getPolarAngle = function () {\n\n      return phi;\n\n    };\n\n    this.getAzimuthalAngle = function () {\n\n      return theta\n\n    };\n\n    this.getAutoRotationAngle = function () {\n\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n    };\n\n    this.getZoomScale = function () {\n\n      return Math.pow(0.95, scope.zoomSpeed);\n\n    };\n\n    this.onMouseDown = function (event) {\n\n      if (scope.enabled === false) return;\n      event.preventDefault();\n\n      if (event.button === scope.mouseButtons.ORBIT) {\n        if (scope.noRotate === true) return;\n\n        state = STATE.ROTATE;\n\n        rotateStart.set(event.clientX, event.clientY);\n\n      } else if (event.button === scope.mouseButtons.ZOOM) {\n        if (scope.noZoom === true) return;\n\n        state = STATE.DOLLY;\n\n        dollyStart.set(event.clientX, event.clientY);\n\n      } else if (event.button === scope.mouseButtons.PAN) {\n        if (scope.noPan === true) return;\n\n        state = STATE.PAN;\n\n        panStart.set(event.clientX, event.clientY);\n\n      }\n\n      if (state !== STATE.NONE) {\n        document.addEventListener('mousemove', scope.onMouseMove, false);\n        document.addEventListener('mouseup', scope.onMouseUp, false);\n        //scope.dispatchEvent(startEvent);\n      }\n\n    };\n\n    this.onMouseMove = function (event) {\n\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (state === STATE.ROTATE) {\n\n        if (scope.noRotate === true) return;\n\n        rotateEnd.set(event.clientX, event.clientY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        // rotating across whole screen goes 360 degrees around\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n        rotateStart.copy(rotateEnd);\n\n      } else if (state === STATE.DOLLY) {\n\n        if (scope.noZoom === true) return;\n\n        dollyEnd.set(event.clientX, event.clientY);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n\n          scope.dollyIn();\n\n        } else {\n\n          scope.dollyOut();\n\n        }\n\n        dollyStart.copy(dollyEnd);\n\n      } else if (state === STATE.PAN) {\n\n        if (scope.noPan === true) return;\n\n        panEnd.set(event.clientX, event.clientY);\n        panDelta.subVectors(panEnd, panStart);\n\n        scope.pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n\n      }\n\n      if (state !== STATE.NONE) scope.update();\n\n    };\n\n    this.onMouseUp = function (/* event */) {\n\n      if (scope.enabled === false) return;\n\n      document.removeEventListener('mousemove', scope.onMouseMove, false);\n      document.removeEventListener('mouseup', scope.onMouseUp, false);\n      //scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n\n    };\n\n    this.onMouseWheel = function (event) {\n\n      if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var delta = 0;\n\n      if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n\n        delta = event.wheelDelta;\n\n      } else if (event.detail !== undefined) { // Firefox\n\n        delta = -event.detail;\n\n      }\n\n      if (delta > 0) {\n\n        scope.dollyOut();\n\n      } else {\n\n        scope.dollyIn();\n\n      }\n\n      scope.update();\n      //scope.dispatchEvent(startEvent);\n      //scope.dispatchEvent(endEvent);\n\n    };\n\n    this.onKeyDown = function (event) {\n\n      if (scope.enabled === false || scope.noKeys === true || scope.noPan === true) return;\n\n      switch (event.keyCode) {\n\n        case scope.keys.UP:\n          scope.pan(0, scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.BOTTOM:\n          scope.pan(0, -scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.LEFT:\n          scope.pan(scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n\n        case scope.keys.RIGHT:\n          scope.pan(-scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n\n      }\n\n    };\n\n    this.touchstart = function (event) {\n\n      if (scope.enabled === false) return;\n\n      switch (event.touches.length) {\n\n        case 1:\t// one-fingered touch: rotate\n\n          if (scope.noRotate === true) return;\n\n          state = STATE.TOUCH_ROTATE;\n\n          rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n          break;\n\n        case 2:\t// two-fingered touch: dolly\n\n          if (scope.noZoom === true) return;\n\n          state = STATE.TOUCH_DOLLY;\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          var distance = Math.sqrt(dx * dx + dy * dy);\n          dollyStart.set(0, distance);\n          break;\n\n        case 3: // three-fingered touch: pan\n\n          if (scope.noPan === true) return;\n\n          state = STATE.TOUCH_PAN;\n\n          panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n\n      //if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n\n    };\n\n    this.touchmove = function (event) {\n\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      switch (event.touches.length) {\n\n        case 1: // one-fingered touch: rotate\n\n          if (scope.noRotate === true) return;\n          if (state !== STATE.TOUCH_ROTATE) return;\n\n          rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n          rotateDelta.subVectors(rotateEnd, rotateStart);\n\n          // rotating across whole screen goes 360 degrees around\n          scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n          // rotating up and down along whole screen attempts to go 360, but limited to 180\n          scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n          rotateStart.copy(rotateEnd);\n\n          scope.update();\n          break;\n\n        case 2: // two-fingered touch: dolly\n\n          if (scope.noZoom === true) return;\n          if (state !== STATE.TOUCH_DOLLY) return;\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          var distance = Math.sqrt(dx * dx + dy * dy);\n\n          dollyEnd.set(0, distance);\n          dollyDelta.subVectors(dollyEnd, dollyStart);\n\n          if (dollyDelta.y > 0) {\n\n            scope.dollyOut();\n\n          } else {\n\n            scope.dollyIn();\n\n          }\n\n          dollyStart.copy(dollyEnd);\n\n          scope.update();\n          break;\n\n        case 3: // three-fingered touch: pan\n\n          if (scope.noPan === true) return;\n          if (state !== STATE.TOUCH_PAN) return;\n\n          panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n          panDelta.subVectors(panEnd, panStart);\n\n          scope.pan(panDelta.x, panDelta.y);\n\n          panStart.copy(panEnd);\n\n          scope.update();\n          break;\n\n        default:\n\n          state = STATE.NONE;\n\n      }\n\n    };\n\n    this.touchend = function (/* event */) {\n\n      if (scope.enabled === false) return;\n\n      //scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n\n    };\n\n    this.domElement.addEventListener('contextmenu', function (event) {\n      event.preventDefault();\n    }, false);\n\n    // force an update at start\n    this.update();\n  }\n\n  up() {\n\n    this.domElement.addEventListener('mousedown', this.onMouseDown, false);\n    this.domElement.addEventListener('mousewheel', this.onMouseWheel, false);\n    this.domElement.addEventListener('DOMMouseScroll', this.onMouseWheel, false); // firefox\n\n    this.domElement.addEventListener('touchstart', this.touchstart, false);\n    this.domElement.addEventListener('touchend', this.touchend, false);\n    this.domElement.addEventListener('touchmove', this.touchmove, false);\n\n    window.addEventListener('keydown', this.onKeyDown, false);\n  }\n\n  down() {\n\n    this.domElement.removeEventListener('mousedown', this.onMouseDown, false);\n    this.domElement.removeEventListener('mousewheel', this.onMouseWheel, false);\n    this.domElement.removeEventListener('DOMMouseScroll', this.onMouseWheel, false); // firefox\n\n    this.domElement.removeEventListener('touchstart', this.touchstart, false);\n    this.domElement.removeEventListener('touchend', this.touchend, false);\n    this.domElement.removeEventListener('touchmove', this.touchmove, false);\n\n    window.removeEventListener('keydown', this.onKeyDown, false);\n  }\n}\nexport default\nclass EditorMode {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n\n    this._attachListeners();\n  }\n\n  up() {\n    var canvas = this.canvas,\n      renderer = canvas.renderer,\n      element = renderer.domElement;\n\n    element.addEventListener('mousedown', this.listeners.mousedown);\n    element.addEventListener('mousemove', this.listeners.mousemove);\n    element.addEventListener('mouseup', this.listeners.mouseup);\n  }\n\n  down() {\n    var canvas = this.canvas,\n      renderer = canvas.renderer,\n      element = renderer.domElement;\n\n    element.removeEventListener('mousedown', this.listeners.mousedown);\n  }\n\n  create() {\n    this.up();\n  }\n\n  _attachListeners() {\n    var downPosition = new THREE.Vector2(),\n      movePosition = new THREE.Vector2(),\n      upPosition = new THREE.Vector2();\n\n    var atom1, atom2;\n\n    var fixed = false;\n\n    this.listeners = {};\n\n    this.listeners.mousedown = (e) => {\n      e.preventDefault();\n\n      downPosition.set(e.clientX, e.clientY);\n\n      let caster = this._getRayCaster(downPosition);\n      let intersect = caster.intersectObjects(canvas.group.children);\n      let position = this._getPosition(downPosition);\n\n      if (e.which === 1 && position && intersect.length === 0) {\n          let atom = new Chem.Atom();\n\n          atom.atomicNumber = 6;\n          atom.position = position;\n          canvas.addAtom(atom);\n\n          atom1 = atom;\n      } else if (e.which === 1 && position && intersect.length > 0) {\n        let model = this._getNearest(intersect);\n\n        if (model instanceof Chem.Atom) {\n          atom1 = model;\n        }\n      }\n\n    };\n\n    this.listeners.mousemove = (e) => {\n      movePosition.set(e.clientX, e.clientY);\n\n      let caster = this._getRayCaster(movePosition);\n      let position = this._getPosition(movePosition);\n\n      if (e.which === 1 && atom1 && movePosition.distanceTo(downPosition) > 60) {\n\n        let intersect = caster.intersectObjects(canvas.group.children);\n\n        intersect = intersect.filter(function (item) {\n          return item.object && item.object.type === 'atom' && item.object.model !== atom2;\n        });\n\n        let model = this._getNearest(intersect);\n\n        if(! fixed && model) {\n          canvas.removeAtom(atom2);\n          atom2 = model;\n          let bond = new Chem.Bond(atom1, atom2);\n          canvas.addBond(bond);\n          fixed = true;\n        } else if(! fixed) {\n          if (!atom2) {\n            atom2 = new Chem.Atom();\n            atom2.atomicNumber = 6;\n            atom2.position = position;\n            let bond = new Chem.Bond(atom1, atom2);\n\n            canvas.addAtom(atom2);\n          }\n\n          atom2.position = position;\n          canvas.update();\n        }\n      }\n    };\n\n    this.listeners.mouseup = (e) => {\n      e.preventDefault();\n      upPosition.set(e.clientX, e.clientY);\n\n      if (e.which === 1 && upPosition.distanceTo(downPosition) > 60) {\n        let position = this._getPosition(upPosition);\n\n\n      }\n\n      atom1 = false;\n      atom2 = false;\n      fixed = false;\n    }\n  }\n\n  _getPosition(point) {\n    let rayCaster = this._getRayCaster(point);\n    let planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), this.canvas.camera.position.z / 4);\n    let position = rayCaster.ray.intersectPlane(planeZ);\n\n    if (position) {\n      let mat = new THREE.Matrix4();\n      mat.getInverse(canvas.group.matrix);\n      position.applyMatrix4(mat);\n      return position;\n    } else {\n      return null;\n    }\n  }\n\n  _getRayCaster(point) {\n    let element = this.canvas.renderer.domElement;\n\n    let point3d = new THREE.Vector3(\n      (point.x / element.offsetWidth) * 2 - 1,\n      -(point.y / element.offsetHeight) * 2 + 1,\n      0.5);\n\n    let rayCaster = new THREE.Raycaster();\n    rayCaster.setFromCamera(point3d, this.canvas.camera);\n\n    return rayCaster;\n  }\n\n  _getNearest(objects) {\n    var distance = 0, result = null;\n\n    for (let object of objects) {\n\n      let _distance = object.object.position.distanceTo(this.canvas.camera.position);\n      if (! result || _distance < distance) {\n        distance = _distance;\n        result = object.object.model;\n      }\n    }\n\n    return result;\n  }\n}\nexport default\nclass OrbitMode {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n\n    this.orbitControl = new OrbitControls(canvas.camera, canvas.renderer.domElement);\n  }\n\n  up() {\n    this.orbitControl.up();\n  }\n\n  down() {\n    this.orbitControl.down();\n  }\n\n  create() {\n    this.up();\n  }\n\n}\n//# sourceMappingURL=concat.js.map","root.Mol3D = {\n  Canvas: Canvas,\n  Display: {\n    BallAndStick: BallAndStick\n  },\n  Mode: {\n    Orbit: OrbitMode,\n    Editor: EditorMode\n  }\n};\n})\n(this);"]}