{"version":3,"sources":["../src/intro.js","../.tmp/es5/.tmp/es6/concat.js","../src/outro.js"],"names":[],"mappings":"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","file":"mol3d.js","sourcesContent":["(function(root) {","export default\r\nclass Canvas {\r\n\r\n  constructor() {\r\n    this.scene = new THREE.Scene();\r\n    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);\r\n    this.camera.position.z = 5;\r\n    this.renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\r\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    this.renderer.setClearColor(0x000000, 0);\r\n\r\n    this.renderer.domElement.addEventListener('contextmenu', (e) => {\r\n      e.preventDefault();\r\n      return false;\r\n    });\r\n\r\n    this.group = new THREE.Object3D();\r\n    this.scene.add(this.group);\r\n\r\n    this.atoms = [];\r\n    this.bonds = [];\r\n\r\n    this._displays = [];\r\n    this._display = null;\r\n\r\n    this._modes = [];\r\n    this._mode = null;\r\n  }\r\n\r\n  attach(molecule) {\r\n    for (let i in molecule.atoms) {\r\n      let atom = molecule.atoms[i];\r\n\r\n      this.addAtom(atom);\r\n    }\r\n  }\r\n\r\n  addAtom(atom, drawBonds = true) {\r\n    this.atoms.push(atom);\r\n\r\n    atom.on('bond', () => {\r\n      // TODO: draw cylinder dynamically\r\n    });\r\n\r\n    atom.on('delete', () => {\r\n      for (let i in this._displays) {\r\n        let _display = this._displays[i];\r\n        _display.removeAtom(atom);\r\n      }\r\n\r\n      this.atoms.splice(this.atoms.indexOf(atom), 1);\r\n    });\r\n\r\n    this._display.drawAtom(atom);\r\n\r\n    if (drawBonds) {\r\n      for (let i in atom.bonds) {\r\n        this.addBond(atom.bonds[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  removeAtom(atom) {\r\n    atom.emit('delete');\r\n  }\r\n\r\n  addBond(bond) {\r\n    this.bonds.push(bond);\r\n\r\n    bond.on('delete', () => {\r\n      for (let i in this._displays) {\r\n        let _display = this._displays[i];\r\n        _display.removeBond(bond);\r\n      }\r\n\r\n      this.bonds.splice(this.bonds.indexOf(bond), 1);\r\n    });\r\n\r\n\r\n    this._display.drawBond(bond);\r\n  }\r\n\r\n  removeBond(bond) {\r\n    bond.emit('delete');\r\n  }\r\n\r\n  clear() {\r\n    var atoms = this.atoms.slice(0, this.atoms.length);\r\n\r\n    for (let i in atoms) {\r\n      this.removeAtom(atoms[i]);\r\n    }\r\n  }\r\n\r\n\r\n  setMode(mode) {\r\n    if (this._mode) {\r\n      this._mode.down();\r\n    }\r\n\r\n    for (var i in this._modes) {\r\n      let _mode = this._modes[i];\r\n\r\n      if (_mode instanceof mode) {\r\n        this._mode = _mode;\r\n        this._mode.up();\r\n        return;\r\n      }\r\n    }\r\n\r\n    this._mode = new mode(this);\r\n    this._mode.create();\r\n    this._modes.push(this._mode);\r\n  }\r\n\r\n  setDisplay(display) {\r\n    if (this._display) {\r\n      this._display.down();\r\n    }\r\n\r\n    for (var i in this._displays) {\r\n      let _display = this._displays[i];\r\n\r\n      if (_display instanceof display) {\r\n        this._display = _display;\r\n        this._display.up();\r\n        return;\r\n      }\r\n    }\r\n\r\n    this._display = new display(this);\r\n    this._display.init();\r\n    this._displays.push(this._display);\r\n  }\r\n\r\n  show() {\r\n    requestAnimationFrame(() => this.show());\r\n\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n\r\n}\r\nexport default\r\nclass OrbitHelper {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n\r\n    this.quaternion = new LiThree.Math.Quaternion();\r\n    this.matrix = null;\r\n\r\n    this.origin = new LiThree.Math.Vector3();\r\n    this.speed = 1;\r\n\r\n    canvas.renderer.camera.position.z = -10;\r\n\r\n    this._getMatrix();\r\n  }\r\n\r\n  rotate(dx, dy) {\r\n    dx *= this.speed;\r\n    dy *= this.speed;\r\n\r\n    var\r\n      r = Math.sqrt(dx * dx + dy * dy),\r\n      dq = new LiThree.Math.Quaternion(1, 0, 0, 0),\r\n      cq = this.quaternion,\r\n      rs = Math.sin(r * Math.PI) / r;\r\n\r\n    if(r < 0.000001) {\r\n      return;\r\n    }\r\n\r\n    dq.x = Math.cos(r * Math.PI);\r\n    dq.y = 0;\r\n    dq.z = rs * dx;\r\n    dq.w = -rs * dy;\r\n\r\n    this.quaternion = new LiThree.Math.Quaternion(1, 0, 0, 0);\r\n    this.quaternion.multiply(dq);\r\n    this.quaternion.multiply(cq);\r\n\r\n    this._getMatrix();\r\n  }\r\n\r\n  distance(delta) {\r\n    var canvas = this.canvas,\r\n      camera = canvas.renderer.camera;\r\n\r\n    delta *= this.speed / 50;\r\n\r\n    if (canvas.getData('tween')) {\r\n      var z = camera.position.z + delta;\r\n      new TWEEN.Tween(camera.position)\r\n        .to({z: z}, 200)\r\n        .easing(TWEEN.Easing.Cubic.Out)\r\n        .start();\r\n    } else {\r\n      camera.position.z += delta / 2;\r\n    }\r\n  }\r\n\r\n  _getMatrix() {\r\n    this.matrix = LiThree.Math.Matrix4.fromRotationTranslationScaleOrigin(this.quaternion, this.origin, new LiThree.Math.Vector3(1, 1, 1), this.origin);\r\n    return this.matrix;\r\n  }\r\n\r\n}\r\nexport default\r\nclass BaseDisplay {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n    this._atoms = [];\r\n  }\r\n  \r\n}\r\nimport BaseDisplay from './_base.js';\r\n\r\nvar BAS_KEY = 'ball-and-stick';\r\n\r\nexport default\r\nclass BallAndStick extends BaseDisplay {\r\n\r\n  constructor(canvas) {\r\n    this.lights = [];\r\n    this.geometries = {\r\n      sphere: new THREE.SphereGeometry(0.3, 20, 20, 0, 2 * Math.PI),\r\n      cylinder: new THREE.CylinderGeometry(0.04, 0.04, 1)\r\n    };\r\n\r\n    this.geometries.cylinder.applyMatrix(new THREE.Matrix4().makeRotationX(Math.PI / 2));\r\n\r\n    super(canvas);\r\n  }\r\n\r\n  drawLight() {\r\n    var light = new THREE.PointLight(0xffffff, 1.5);\r\n\r\n    var updateLightPosition = () => {\r\n      let position = this.canvas.camera.position;\r\n\r\n      light.position.set(position.x * 100, position.y * 100, position.z * 300);\r\n\r\n      requestAnimationFrame(updateLightPosition);\r\n    };\r\n\r\n    requestAnimationFrame(updateLightPosition);\r\n\r\n    this.canvas.scene.add(light);\r\n  }\r\n\r\n  drawAtom(atom) {\r\n    let material = new THREE.MeshPhongMaterial({\r\n      ambient: atom.element.color,\r\n      color: atom.element.color,\r\n      specular: 0x101010,\r\n      shininess: 30\r\n    });\r\n\r\n    let radius = Math.exp(-Math.pow(atom.element.atomicRadius - 91, 2) / 500) * atom.element.atomicRadius / 70;\r\n    let mesh = new THREE.Mesh(this.geometries.sphere, material);\r\n    mesh.scale.set(radius, radius, radius);\r\n    mesh.position.copy(atom.position);\r\n    mesh.type = 'atom';\r\n    mesh.model = atom;\r\n    this.canvas.group.add(mesh);\r\n\r\n    atom.setData(BAS_KEY, mesh);\r\n  }\r\n\r\n  removeAtom(atom) {\r\n    let mesh = atom.getData(BAS_KEY);\r\n    this.canvas.group.remove(mesh);\r\n  }\r\n\r\n  drawBond(bond) {\r\n    var elements;\r\n\r\n    elements = new THREE.Object3D();\r\n\r\n\r\n    bond.setData(BAS_KEY, elements);\r\n\r\n    var canvas = this.canvas,\r\n      group = canvas.group,\r\n      begin = bond.begin,\r\n      end = bond.end,\r\n      beginData = begin.getData(BAS_KEY),\r\n      endData = end.getData(BAS_KEY);\r\n\r\n    if (!beginData || !endData) {\r\n      return;\r\n    }\r\n\r\n    group.add(elements);\r\n\r\n    var beginPosition = beginData.position,\r\n      endPosition = endData.position,\r\n      beginColor = new THREE.Color(begin.element.color),\r\n      endColor = new THREE.Color(end.element.color),\r\n      distance = beginPosition.distanceTo(endPosition),\r\n      middle = beginPosition.clone().add(endPosition).divideScalar(2),\r\n      d = 0.06;\r\n\r\n    var texture = BallAndStick.generateTexture(beginColor, endColor);\r\n\r\n    var material = new THREE.MeshPhongMaterial({\r\n      color: 0xffffff,\r\n      specular: 0x101010,\r\n      shininess: 30,\r\n      map: texture,\r\n      transparent: true\r\n    });\r\n\r\n    var c = (bond.order - 1) * d;\r\n\r\n    for (let i = 0; i < bond.order; i++) {\r\n      let mesh = new THREE.Mesh(this.geometries.cylinder, material);\r\n      mesh.scale.z = distance;\r\n      mesh.position.copy(middle);\r\n      mesh.lookAt(endPosition);\r\n      elements.add(mesh);\r\n    }\r\n\r\n    for (let j in elements.children) {\r\n      let cylinder = elements.children[j];\r\n\r\n      cylinder.position.y += j * d * 2.1 - c;\r\n    }\r\n\r\n\r\n  }\r\n\r\n  removeBond(bond) {\r\n    let mesh = bond.getData(BAS_KEY);\r\n    console.log(1);\r\n    this.canvas.group.remove(mesh);\r\n  }\r\n\r\n  init() {\r\n    this.drawLight();\r\n    this.up();\r\n  }\r\n\r\n  up() {\r\n    var scene = this.canvas.scene;\r\n  }\r\n\r\n  down() {\r\n    var scene = this.canvas.scene;\r\n  }\r\n\r\n  static generateTexture(b, e) {\r\n    b = '#' + b.getHexString();\r\n    e = '#' + e.getHexString();\r\n\r\n    var width = 2,\r\n      height = 200;\r\n\r\n    // create canvas\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    // get context\r\n    var context = canvas.getContext('2d');\r\n\r\n    // draw gradient\r\n    context.rect(0, 0, width, height);\r\n    var gradient = context.createLinearGradient(0, 0, 0, height);\r\n    gradient.addColorStop(0, e);\r\n    gradient.addColorStop(0.5, e);\r\n    gradient.addColorStop(0.5, b);\r\n    gradient.addColorStop(1, b);\r\n    context.fillStyle = gradient;\r\n    context.fill();\r\n\r\n    var texture = new THREE.Texture(canvas);\r\n    canvas.remove();\r\n\r\n    texture.needsUpdate = true; // important!\r\n\r\n    return texture;\r\n  }\r\n}\r\n/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\nclass OrbitControls {\r\n  constructor(object, domElement) {\r\n\r\n    this.object = object;\r\n    this.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n    // API\r\n\r\n    // Set to false to disable this control\r\n    this.enabled = true;\r\n\r\n    // \"target\" sets the location of focus, where the control orbits around\r\n    // and where it pans with respect to.\r\n    this.target = new THREE.Vector3();\r\n\r\n    // center is old, deprecated; use \"target\" instead\r\n    this.center = this.target;\r\n\r\n    // This option actually enables dollying in and out; left as \"zoom\" for\r\n    // backwards compatibility\r\n    this.noZoom = false;\r\n    this.zoomSpeed = 1.0;\r\n\r\n    // Limits to how far you can dolly in and out\r\n    this.minDistance = 0;\r\n    this.maxDistance = Infinity;\r\n\r\n    // Set to true to disable this control\r\n    this.noRotate = false;\r\n    this.rotateSpeed = 1.0;\r\n\r\n    // Set to true to disable this control\r\n    this.noPan = false;\r\n    this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n    // Set to true to automatically rotate around the target\r\n    this.autoRotate = false;\r\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n    // How far you can orbit vertically, upper and lower limits.\r\n    // Range is 0 to Math.PI radians.\r\n    this.minPolarAngle = 0; // radians\r\n    this.maxPolarAngle = Math.PI; // radians\r\n\r\n    // How far you can orbit horizontally, upper and lower limits.\r\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n    this.minAzimuthAngle = -Infinity; // radians\r\n    this.maxAzimuthAngle = Infinity; // radians\r\n\r\n    // Set to true to disable use of the keys\r\n    this.noKeys = false;\r\n\r\n    // The four arrow keys\r\n    this.keys = {LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40};\r\n\r\n    // Mouse buttons\r\n    this.mouseButtons = {ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT};\r\n\r\n    ////////////\r\n    // internals\r\n\r\n    var scope = this;\r\n\r\n    var EPS = 0.000001;\r\n\r\n    var rotateStart = new THREE.Vector2();\r\n    var rotateEnd = new THREE.Vector2();\r\n    var rotateDelta = new THREE.Vector2();\r\n\r\n    var panStart = new THREE.Vector2();\r\n    var panEnd = new THREE.Vector2();\r\n    var panDelta = new THREE.Vector2();\r\n    var panOffset = new THREE.Vector3();\r\n\r\n    var offset = new THREE.Vector3();\r\n\r\n    var dollyStart = new THREE.Vector2();\r\n    var dollyEnd = new THREE.Vector2();\r\n    var dollyDelta = new THREE.Vector2();\r\n\r\n    var theta;\r\n    var phi;\r\n    var phiDelta = 0;\r\n    var thetaDelta = 0;\r\n    var scale = 1;\r\n    var pan = new THREE.Vector3();\r\n\r\n    var lastPosition = new THREE.Vector3();\r\n    var lastQuaternion = new THREE.Quaternion();\r\n\r\n    var STATE = {NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5};\r\n\r\n    var state = STATE.NONE;\r\n\r\n    // for reset\r\n\r\n    this.target0 = this.target.clone();\r\n    this.position0 = this.object.position.clone();\r\n\r\n    // so camera.up is the orbit axis\r\n\r\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\r\n    var quatInverse = quat.clone().inverse();\r\n\r\n    // events\r\n\r\n    var changeEvent = {type: 'change'};\r\n    var startEvent = {type: 'start'};\r\n    var endEvent = {type: 'end'};\r\n\r\n    this.rotateLeft = function (angle) {\r\n\r\n      if (angle === undefined) {\r\n\r\n        angle = getAutoRotationAngle();\r\n\r\n      }\r\n\r\n      thetaDelta -= angle;\r\n\r\n    };\r\n\r\n    this.rotateUp = function (angle) {\r\n\r\n      if (angle === undefined) {\r\n\r\n        angle = getAutoRotationAngle();\r\n\r\n      }\r\n\r\n      phiDelta -= angle;\r\n\r\n    };\r\n\r\n    // pass in distance in world space to move left\r\n    this.panLeft = function (distance) {\r\n\r\n      var te = this.object.matrix.elements;\r\n\r\n      // get X column of matrix\r\n      panOffset.set(te[0], te[1], te[2]);\r\n      panOffset.multiplyScalar(-distance);\r\n\r\n      pan.add(panOffset);\r\n\r\n    };\r\n\r\n    // pass in distance in world space to move up\r\n    this.panUp = function (distance) {\r\n\r\n      var te = this.object.matrix.elements;\r\n\r\n      // get Y column of matrix\r\n      panOffset.set(te[4], te[5], te[6]);\r\n      panOffset.multiplyScalar(distance);\r\n\r\n      pan.add(panOffset);\r\n\r\n    };\r\n\r\n    // pass in x,y of change desired in pixel space,\r\n    // right and down are positive\r\n    this.pan = function (deltaX, deltaY) {\r\n\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if (scope.object.fov !== undefined) {\r\n\r\n        // perspective\r\n        var position = scope.object.position;\r\n        var offset = position.clone().sub(scope.target);\r\n        var targetDistance = offset.length();\r\n\r\n        // half of the fov is center to top of screen\r\n        targetDistance *= Math.tan(( scope.object.fov / 2 ) * Math.PI / 180.0);\r\n\r\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n        scope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\r\n        scope.panUp(2 * deltaY * targetDistance / element.clientHeight);\r\n\r\n      } else if (scope.object.top !== undefined) {\r\n\r\n        // orthographic\r\n        scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\r\n        scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\r\n\r\n      } else {\r\n\r\n        // camera neither orthographic or perspective\r\n        console.warn('WARNING: orbit-controls.js encountered an unknown camera type - pan disabled.');\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this.dollyIn = function (dollyScale) {\r\n\r\n      if (dollyScale === undefined) {\r\n\r\n        dollyScale = scope.getZoomScale();\r\n\r\n      }\r\n\r\n      scale /= dollyScale;\r\n\r\n    };\r\n\r\n    this.dollyOut = function (dollyScale) {\r\n\r\n      if (dollyScale === undefined) {\r\n\r\n        dollyScale = scope.getZoomScale();\r\n\r\n      }\r\n\r\n      scale *= dollyScale;\r\n\r\n    };\r\n\r\n    this.update = function () {\r\n\r\n      var position = this.object.position;\r\n\r\n      offset.copy(position).sub(this.target);\r\n\r\n      // rotate offset to \"y-axis-is-up\" space\r\n      offset.applyQuaternion(quat);\r\n\r\n      // angle from z-axis around y-axis\r\n\r\n      theta = Math.atan2(offset.x, offset.z);\r\n\r\n      // angle from y-axis\r\n\r\n      phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\r\n\r\n      if (this.autoRotate && state === STATE.NONE) {\r\n\r\n        this.rotateLeft(getAutoRotationAngle());\r\n\r\n      }\r\n\r\n      theta += thetaDelta;\r\n      phi += phiDelta;\r\n\r\n      // restrict theta to be between desired limits\r\n      theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\r\n\r\n      // restrict phi to be between desired limits\r\n      phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\r\n\r\n      // restrict phi to be betwee EPS and PI-EPS\r\n      phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\r\n\r\n      var radius = offset.length() * scale;\r\n\r\n      // restrict radius to be between desired limits\r\n      radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\r\n\r\n      // move target to panned location\r\n      this.target.add(pan);\r\n\r\n      offset.x = radius * Math.sin(phi) * Math.sin(theta);\r\n      offset.y = radius * Math.cos(phi);\r\n      offset.z = radius * Math.sin(phi) * Math.cos(theta);\r\n\r\n      // rotate offset back to \"camera-up-vector-is-up\" space\r\n      offset.applyQuaternion(quatInverse);\r\n\r\n      position.copy(this.target).add(offset);\r\n\r\n      this.object.lookAt(this.target);\r\n\r\n      thetaDelta = 0;\r\n      phiDelta = 0;\r\n      scale = 1;\r\n      pan.set(0, 0, 0);\r\n\r\n      // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if (lastPosition.distanceToSquared(this.object.position) > EPS\r\n        || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\r\n\r\n        //this.dispatchEvent(changeEvent);\r\n\r\n        lastPosition.copy(this.object.position);\r\n        lastQuaternion.copy(this.object.quaternion);\r\n\r\n      }\r\n\r\n    };\r\n\r\n\r\n    this.reset = function () {\r\n\r\n      state = STATE.NONE;\r\n\r\n      this.target.copy(this.target0);\r\n      this.object.position.copy(this.position0);\r\n\r\n      this.update();\r\n\r\n    };\r\n\r\n    this.getPolarAngle = function () {\r\n\r\n      return phi;\r\n\r\n    };\r\n\r\n    this.getAzimuthalAngle = function () {\r\n\r\n      return theta\r\n\r\n    };\r\n\r\n    this.getAutoRotationAngle = function () {\r\n\r\n      return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n    };\r\n\r\n    this.getZoomScale = function () {\r\n\r\n      return Math.pow(0.95, scope.zoomSpeed);\r\n\r\n    };\r\n\r\n    this.onMouseDown = function (event) {\r\n\r\n      if (scope.enabled === false) return;\r\n      event.preventDefault();\r\n\r\n      if (event.button === scope.mouseButtons.ORBIT) {\r\n        if (scope.noRotate === true) return;\r\n\r\n        state = STATE.ROTATE;\r\n\r\n        rotateStart.set(event.clientX, event.clientY);\r\n\r\n      } else if (event.button === scope.mouseButtons.ZOOM) {\r\n        if (scope.noZoom === true) return;\r\n\r\n        state = STATE.DOLLY;\r\n\r\n        dollyStart.set(event.clientX, event.clientY);\r\n\r\n      } else if (event.button === scope.mouseButtons.PAN) {\r\n        if (scope.noPan === true) return;\r\n\r\n        state = STATE.PAN;\r\n\r\n        panStart.set(event.clientX, event.clientY);\r\n\r\n      }\r\n\r\n      if (state !== STATE.NONE) {\r\n        document.addEventListener('mousemove', scope.onMouseMove, false);\r\n        document.addEventListener('mouseup', scope.onMouseUp, false);\r\n        //scope.dispatchEvent(startEvent);\r\n      }\r\n\r\n    };\r\n\r\n    this.onMouseMove = function (event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if (state === STATE.ROTATE) {\r\n\r\n        if (scope.noRotate === true) return;\r\n\r\n        rotateEnd.set(event.clientX, event.clientY);\r\n        rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n        // rotating across whole screen goes 360 degrees around\r\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\r\n\r\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\r\n\r\n        rotateStart.copy(rotateEnd);\r\n\r\n      } else if (state === STATE.DOLLY) {\r\n\r\n        if (scope.noZoom === true) return;\r\n\r\n        dollyEnd.set(event.clientX, event.clientY);\r\n        dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n        if (dollyDelta.y > 0) {\r\n\r\n          scope.dollyIn();\r\n\r\n        } else {\r\n\r\n          scope.dollyOut();\r\n\r\n        }\r\n\r\n        dollyStart.copy(dollyEnd);\r\n\r\n      } else if (state === STATE.PAN) {\r\n\r\n        if (scope.noPan === true) return;\r\n\r\n        panEnd.set(event.clientX, event.clientY);\r\n        panDelta.subVectors(panEnd, panStart);\r\n\r\n        scope.pan(panDelta.x, panDelta.y);\r\n\r\n        panStart.copy(panEnd);\r\n\r\n      }\r\n\r\n      if (state !== STATE.NONE) scope.update();\r\n\r\n    };\r\n\r\n    this.onMouseUp = function (/* event */) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      document.removeEventListener('mousemove', scope.onMouseMove, false);\r\n      document.removeEventListener('mouseup', scope.onMouseUp, false);\r\n      //scope.dispatchEvent(endEvent);\r\n      state = STATE.NONE;\r\n\r\n    };\r\n\r\n    this.onMouseWheel = function (event) {\r\n\r\n      if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\r\n\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      var delta = 0;\r\n\r\n      if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\r\n\r\n        delta = event.wheelDelta;\r\n\r\n      } else if (event.detail !== undefined) { // Firefox\r\n\r\n        delta = -event.detail;\r\n\r\n      }\r\n\r\n      if (delta > 0) {\r\n\r\n        scope.dollyOut();\r\n\r\n      } else {\r\n\r\n        scope.dollyIn();\r\n\r\n      }\r\n\r\n      scope.update();\r\n      //scope.dispatchEvent(startEvent);\r\n      //scope.dispatchEvent(endEvent);\r\n\r\n    };\r\n\r\n    this.onKeyDown = function (event) {\r\n\r\n      if (scope.enabled === false || scope.noKeys === true || scope.noPan === true) return;\r\n\r\n      switch (event.keyCode) {\r\n\r\n        case scope.keys.UP:\r\n          scope.pan(0, scope.keyPanSpeed);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.BOTTOM:\r\n          scope.pan(0, -scope.keyPanSpeed);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.LEFT:\r\n          scope.pan(scope.keyPanSpeed, 0);\r\n          scope.update();\r\n          break;\r\n\r\n        case scope.keys.RIGHT:\r\n          scope.pan(-scope.keyPanSpeed, 0);\r\n          scope.update();\r\n          break;\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this.touchstart = function (event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      switch (event.touches.length) {\r\n\r\n        case 1:\t// one-fingered touch: rotate\r\n\r\n          if (scope.noRotate === true) return;\r\n\r\n          state = STATE.TOUCH_ROTATE;\r\n\r\n          rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n          break;\r\n\r\n        case 2:\t// two-fingered touch: dolly\r\n\r\n          if (scope.noZoom === true) return;\r\n\r\n          state = STATE.TOUCH_DOLLY;\r\n\r\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\r\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\r\n          var distance = Math.sqrt(dx * dx + dy * dy);\r\n          dollyStart.set(0, distance);\r\n          break;\r\n\r\n        case 3: // three-fingered touch: pan\r\n\r\n          if (scope.noPan === true) return;\r\n\r\n          state = STATE.TOUCH_PAN;\r\n\r\n          panStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n          break;\r\n\r\n        default:\r\n\r\n          state = STATE.NONE;\r\n\r\n      }\r\n\r\n      //if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\r\n\r\n    };\r\n\r\n    this.touchmove = function (event) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      switch (event.touches.length) {\r\n\r\n        case 1: // one-fingered touch: rotate\r\n\r\n          if (scope.noRotate === true) return;\r\n          if (state !== STATE.TOUCH_ROTATE) return;\r\n\r\n          rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n          rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n          // rotating across whole screen goes 360 degrees around\r\n          scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\r\n          // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n          scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\r\n\r\n          rotateStart.copy(rotateEnd);\r\n\r\n          scope.update();\r\n          break;\r\n\r\n        case 2: // two-fingered touch: dolly\r\n\r\n          if (scope.noZoom === true) return;\r\n          if (state !== STATE.TOUCH_DOLLY) return;\r\n\r\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\r\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\r\n          var distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n          dollyEnd.set(0, distance);\r\n          dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n          if (dollyDelta.y > 0) {\r\n\r\n            scope.dollyOut();\r\n\r\n          } else {\r\n\r\n            scope.dollyIn();\r\n\r\n          }\r\n\r\n          dollyStart.copy(dollyEnd);\r\n\r\n          scope.update();\r\n          break;\r\n\r\n        case 3: // three-fingered touch: pan\r\n\r\n          if (scope.noPan === true) return;\r\n          if (state !== STATE.TOUCH_PAN) return;\r\n\r\n          panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n          panDelta.subVectors(panEnd, panStart);\r\n\r\n          scope.pan(panDelta.x, panDelta.y);\r\n\r\n          panStart.copy(panEnd);\r\n\r\n          scope.update();\r\n          break;\r\n\r\n        default:\r\n\r\n          state = STATE.NONE;\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this.touchend = function (/* event */) {\r\n\r\n      if (scope.enabled === false) return;\r\n\r\n      //scope.dispatchEvent(endEvent);\r\n      state = STATE.NONE;\r\n\r\n    };\r\n\r\n    this.domElement.addEventListener('contextmenu', function (event) {\r\n      event.preventDefault();\r\n    }, false);\r\n\r\n    // force an update at start\r\n    this.update();\r\n  }\r\n\r\n  up() {\r\n\r\n    this.domElement.addEventListener('mousedown', this.onMouseDown, false);\r\n    this.domElement.addEventListener('mousewheel', this.onMouseWheel, false);\r\n    this.domElement.addEventListener('DOMMouseScroll', this.onMouseWheel, false); // firefox\r\n\r\n    this.domElement.addEventListener('touchstart', this.touchstart, false);\r\n    this.domElement.addEventListener('touchend', this.touchend, false);\r\n    this.domElement.addEventListener('touchmove', this.touchmove, false);\r\n\r\n    window.addEventListener('keydown', this.onKeyDown, false);\r\n  }\r\n\r\n  down() {\r\n\r\n    this.domElement.removeEventListener('mousedown', this.onMouseDown, false);\r\n    this.domElement.removeEventListener('mousewheel', this.onMouseWheel, false);\r\n    this.domElement.removeEventListener('DOMMouseScroll', this.onMouseWheel, false); // firefox\r\n\r\n    this.domElement.removeEventListener('touchstart', this.touchstart, false);\r\n    this.domElement.removeEventListener('touchend', this.touchend, false);\r\n    this.domElement.removeEventListener('touchmove', this.touchmove, false);\r\n\r\n    window.removeEventListener('keydown', this.onKeyDown, false);\r\n  }\r\n}\r\nexport default\r\nclass EditorMode {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n\r\n    this._attachListeners();\r\n  }\r\n\r\n  up() {\r\n    var canvas = this.canvas,\r\n      renderer = canvas.renderer,\r\n      element = renderer.domElement;\r\n\r\n    element.addEventListener('mousedown', this.listeners.mousedown);\r\n    element.addEventListener('mouseup', this.listeners.mouseup);\r\n  }\r\n\r\n  down() {\r\n    var canvas = this.canvas,\r\n      renderer = canvas.renderer,\r\n      element = renderer.domElement;\r\n\r\n    element.removeEventListener('mousedown', this.listeners.mousedown);\r\n  }\r\n\r\n  create() {\r\n    this.up();\r\n  }\r\n\r\n  _attachListeners() {\r\n    var downPosition = new THREE.Vector2(),\r\n      movePosition = new THREE.Vector3(),\r\n      upPosition = new THREE.Vector2();\r\n\r\n    var atom1, atom2;\r\n\r\n    this.listeners = {};\r\n\r\n    this.listeners.mousedown = (e) => {\r\n      e.preventDefault();\r\n\r\n      downPosition.set(e.clientX, e.clientY);\r\n\r\n      let caster = this._getRayCaster(downPosition);\r\n      let intersect = caster.intersectObjects(canvas.group.children);\r\n      let position = this._getPosition(downPosition);\r\n\r\n      if (e.which === 1 && position && intersect.length === 0) {\r\n        if (intersect.length === 0) {\r\n          let atom = new Chem.Atom();\r\n\r\n          atom.atomicNumber = 6;\r\n          atom.position = position;\r\n\r\n          canvas.addAtom(atom);\r\n\r\n          atom1 = atom;\r\n        } else if (e.which === 1 && intersect.length) {\r\n\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    this.listeners.mousemove = function (e) {\r\n      movePosition.set(e.clientX, e.clientY);\r\n\r\n      let position = this._getPosition(downPosition);\r\n      if (atom1) {\r\n\r\n      }\r\n    };\r\n\r\n    this.listeners.mouseup = (e) => {\r\n      e.preventDefault();\r\n      upPosition.set(e.clientX, e.clientY);\r\n\r\n      if (e.which === 1 && upPosition.distanceTo(downPosition) > 60) {\r\n        let position = this._getPosition(upPosition);\r\n      }\r\n\r\n      atom1 = false;\r\n      atom2 = false;\r\n    }\r\n  }\r\n\r\n  _getPosition(point) {\r\n    let rayCaster = this._getRayCaster(point);\r\n    let planeZ = new THREE.Plane(new THREE.Vector3(0, 0, 1), this.canvas.camera.position.z / 4);\r\n    let position = rayCaster.ray.intersectPlane(planeZ);\r\n\r\n    if (position) {\r\n      let mat = new THREE.Matrix4();\r\n      mat.getInverse(canvas.group.matrix);\r\n      position.applyMatrix4(mat);\r\n      return position;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  _getRayCaster(point) {\r\n    let element = this.canvas.renderer.domElement;\r\n\r\n    let point3d = new THREE.Vector3(\r\n      (point.x / element.offsetWidth) * 2 - 1,\r\n      -(point.y / element.offsetHeight) * 2 + 1,\r\n      0.5);\r\n\r\n    let rayCaster = new THREE.Raycaster();\r\n    rayCaster.setFromCamera(point3d, this.canvas.camera);\r\n\r\n    return rayCaster;\r\n  }\r\n}\r\nexport default\r\nclass OrbitMode {\r\n\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n\r\n    this.orbitControl = new OrbitControls(canvas.camera, canvas.renderer.domElement);\r\n  }\r\n\r\n  up() {\r\n    this.orbitControl.up();\r\n  }\r\n\r\n  down() {\r\n    this.orbitControl.down();\r\n  }\r\n\r\n  create() {\r\n    this.up();\r\n  }\r\n\r\n}\n//# sourceMappingURL=concat.js.map","root.Mol3D = {\r\n  Canvas: Canvas,\r\n  Display: {\r\n    BallAndStick: BallAndStick\r\n  },\r\n  Mode: {\r\n    Orbit: OrbitMode,\r\n    Editor: EditorMode\r\n  }\r\n};\r\n})\r\n(this);"]}